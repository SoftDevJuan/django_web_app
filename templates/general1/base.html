{%load static%}
<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <!-- Incluir Font Awesome y jQuery -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="{% static 'icon/engrane-azul2.png' %}" type="image/png">
  

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Turnero CCL</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'css/styles.min.css' %}"/>
    <link rel="icon" type="image/png" href="" />
    {% load static %} {% if usuario.is_authenticated %}
    <script type="text/javascript">
      var csrf_token = "{{ csrf_token }}";
      sessionStorage.setItem("csrf_token", csrf_token);
    </script>

    <script> var username = "{{ username }}"; 
    var user_id = "{{user.id}}";
    </script>
    {%if usuario.is_authenticated and nombreGrupo == 'Administrador' or nombreGrupo == 'Conciliacion' %}
    <script>var audioPathNotificacion = "{% static 'audios/alerta-notificacion.mp3' %}";</script>
    <script src="{% static 'js/notificaciones.js' %}"></script>
    <script src="{% static 'js/notificaciones_conciliador.js' %}"></script>
    <script src="{% static 'js/notificaciones_coordinador.js' %}"></script>
{%endif%}

    {% endif %}
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap");
      :root {
        --header-height: 3rem;
        --nav-width: 68px;
        --first-color: #0a1f8f;
        --first-color-light: #afa5d9;
        --white-color: #f7f6fb;
        --body-font: "Nunito", sans-serif;
        --normal-font-size: 1rem;
        --z-fixed: 100;
      }
      *,
      ::before,
      ::after {
        box-sizing: border-box;
      }
      body {
        position: relative;
        margin: var(--header-height) 0 0 0;
        padding: 0 1rem;
        font-family: var(--body-font);
        font-size: var(--normal-font-size);
        transition: 0.5s;
      }
      a {
        text-decoration: none;
      }
      .header {
        width: 100%;
        height: var(--header-height);
        position: fixed;
        top: 0;
        left: 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 1rem;
        background-color: var(--white-color);
        z-index: var(--z-fixed);
        transition: 0.5s;
      }
      .header_toggle {
        color: var(--first-color);
        font-size: 1.5rem;
        cursor: pointer;
      }
      .header_img {
        width: 35px;
        height: 35px;
        display: flex;
        justify-content: center;
        border-radius: 50%;
        overflow: hidden;
      }
      html, body{
        height: 100%;
        width: 100%;
      }
      .nav.flex-column a{
        text-decoration: none !important;
        color: white !important;
      }
      .header_img img {
        width: 40px;
      }
      .l-navbar {
        position: fixed;
        top: 0;
        left: -30%;
        width: var(--nav-width);
        height: 100vh;
        background-color: var(--first-color);
        padding: 0.5rem 1rem 0 0;
        transition: 0.5s;
        z-index: var(--z-fixed);
      }
      .nav {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        overflow: hidden;
      }
      .nav_logo,
      .nav_link {
        display: grid;
        grid-template-columns: max-content max-content;
        align-items: center;
        column-gap: 1rem;
        padding: 0.5rem 0 0.5rem 1.5rem;
      }
      .nav_logo {
        margin-bottom: 2rem;
      }
      .nav_logo-icon {
        width: 1.50rem;
        color: var(--white-color);
      }
      .nav_logo-name {
        color: var(--white-color);
        font-weight: 700;
      }
      .nav_link {
        position: relative;
        color: var(--first-color-light);
        margin-bottom: 1.5rem;
        transition: 0.3s;
      }
      .nav_link:hover {
        color: var(--white-color);
      }
      .nav_icon {
        font-size: 1.25rem;
      }
      .show {
        left: 0;
      }
      .body-pd {
        padding-left: calc(var(--nav-width) + 1rem);
      }
      .active {
        color: var(--white-color);
      }
      .active::before {
        content: "";
        position: absolute;
        left: 0;
        width: 2px;
        height: 32px;
        background-color: var(--white-color);
      }
      .height-100 {
        height: 100vh;
      }
      @media screen and (min-width: 768px) {
        body {
          margin: calc(var(--header-height) + 1rem) 0 0 0;
          padding-left: calc(var(--nav-width) + 2rem);
        }
        .header {
          height: calc(var(--header-height) + 1rem);
          padding: 0 2rem 0 calc(var(--nav-width) + 2rem);
        }
        .header_img {
          width: 40px;
          height: 40px;
        }
        .header_img img {
          width: 45px;
        }
        .l-navbar {
          left: 0;
          padding: 1rem 1rem 0 0;
        }
        .show {
          width: calc(var(--nav-width) + 156px);
        }
        .body-pd {
          padding-left: calc(var(--nav-width) + 188px);
        }
      }
      .text-blue{
        color: var(--first-color);
      }
      .bg-blue{
        background-color: var(--first-color);
      }
      .text-white{
        color: #fff;
      }
      button:hover{
        background-color: none !important;
        color: #fff;
      }
      a:hover{
        background-color: none !important;
      }
      #chart {
        width: 100%;
        margin: 35px auto;
        opacity: 0.9;
      }

      #timeline-chart .apexcharts-toolbar {
        opacity: 1;
         border: 0;
      }

      table {
        width: 50%;
        border-collapse: collapse;
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    th {
        background-color: #f2f2f2;
    }
    .user-image {
        border-radius: 50%;
        width: 40px;
        height: 40px;
    }
    .icon {
        margin-right: 5px;
    }
    </style>
  </head>
  <body id="body-pd">
    {% include 'general1/header.html' %}
    {% block content %}{% endblock %}

    <script src="https://kit.fontawesome.com/8ea13d36c9.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- script para asignar iconos -->
<script>
  $(document).ready(function() {
      $('.status').each(function() {
          var status = $(this).data('status');
          var icon = '';
          var color = '';

          switch(status) {
              case 'Pendiente':
                  icon = 'fa-hourglass-half';
                  color = 'orange';
                  break;
              case 'En Proceso':
                  icon = 'fa-spinner';
                  color = 'blue';
                  break;
              case 'Finalizado':
                  icon = 'fa-check-circle';
                  color = 'green';
                  break;
              default:
                  icon = 'fa-question-circle';
                  color = 'gray';
          }

          $(this).html('<i class="fas ' + icon + ' icon" style="color: ' + color + ';"></i> ' + status);
      });
  });
</script>

    <script>
      document.addEventListener("DOMContentLoaded", function (event) {
        const showNavbar = (toggleId, navId, bodyId, headerId) => {
          const toggle = document.getElementById(toggleId),
            nav = document.getElementById(navId),
            bodypd = document.getElementById(bodyId),
            headerpd = document.getElementById(headerId);

          // Validate that all variables exist
          if (toggle && nav && bodypd && headerpd) {
            toggle.addEventListener("click", () => {
              // show navbar
              nav.classList.toggle("show");
              // change icon
              toggle.classList.toggle("bx-x");
              // add padding to body
              bodypd.classList.toggle("body-pd");
              // add padding to header
              headerpd.classList.toggle("body-pd");
            });
          }
        };

        showNavbar("header-toggle", "nav-bar", "body-pd", "header");

        /*===== LINK ACTIVE =====*/
        const linkColor = document.querySelectorAll(".nav_link");

        function colorLink() {
          if (linkColor) {
            linkColor.forEach((l) => l.classList.remove("active"));
            this.classList.add("active");
          }
        }
        linkColor.forEach((l) => l.addEventListener("click", colorLink));
      });
    </script>
    <script>
      var options = {
      chart: {
        type: "area",
        height: 400,
        foreColor: "#999",
        stacked: true,
        dropShadow: {
          enabled: true,
          enabledSeries: [0],
          top: -2,
          left: 2,
          blur: 5,
          opacity: 0.06
        }
      },
      colors: ['#00E396', '#0090FF'],
      stroke: {
        curve: "smooth",
        width: 3
      },
      dataLabels: {
        enabled: false
      },
      series: [{
        name: 'Turnos atendidos',
        data: generateDayWiseTimeSeries(0, 18)
      }, {
        name: 'Turnos cancelados',
        data: generateDayWiseTimeSeries(1, 18)
      }],
      markers: {
        size: 0,
        strokeColor: "#fff",
        strokeWidth: 3,
        strokeOpacity: 1,
        fillOpacity: 1,
        hover: {
          size: 6
        }
      },
      xaxis: {
        type: "datetime",
        axisBorder: {
          show: false
        },
        axisTicks: {
          show: false
        }
      },
      yaxis: {
        labels: {
          offsetX: 14,
          offsetY: -5
        },
        tooltip: {
          enabled: true
        }
      },
      grid: {
        padding: {
          left: -5,
          right: 5
        }
      },
      tooltip: {
        x: {
          format: "dd MMM yyyy"
        },
      },
      legend: {
        position: 'top',
        horizontalAlign: 'left'
      },
      fill: {
        type: "solid",
        fillOpacity: 0.7
      }
      };

        var chart = new ApexCharts(document.querySelector("#timeline-chart"), options);

        chart.render();

        function generateDayWiseTimeSeries(s, count) {
          var values = [[
            4,3,10,9,29,19,25,9,12,7,19,5,13,9,17,2,7,0
          ], [
            2,3,8,7,22,16,23,7,11,5,12,5,10,4,15,2,6,2
          ]];
          var i = 0;
          var series = [];
          var x = new Date("17 Jun 2024").getTime();
          while (i < count) {
            series.push([x, values[s][i]]);
            x += 86400000;
            i++;
          }
          return series;
        }
    </script>
  </body>
</html>